{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\n\nconst LS_FEEDBACK_STATE_KEY = \"feedback-form-state\";\n\nconst form = document.querySelector('.feedback-form');\nconst email = form.elements.email;\nconst message = form.elements.message;\n\nconst onSubmitFeedback = event => {\n    event.preventDefault();\n    console.log(fedbackState);\n    localStorage.removeItem(LS_FEEDBACK_STATE_KEY);\n    updateFeedbackState(\"\");\n    updateFeedbackForm();\n}\n\nconst onInput = throttle(() => saveFeedbackState(), 500);\n\n\nlet fedbackState = getEmptyFeedbackState();\nupdateFeedbackState(localStorage.getItem(LS_FEEDBACK_STATE_KEY));\nupdateFeedbackForm();\n\n\nform.addEventListener(\"submit\", onSubmitFeedback);\nemail.addEventListener(\"input\", onInput);\nmessage.addEventListener(\"input\", onInput);\n\n\nfunction updateFeedbackState(jsonStr) {\n    fedbackState = jsonStr ? JSON.parse(jsonStr) : getEmptyFeedbackState();    \n}\n\nfunction saveFeedbackState() {\n    fedbackState.email = email.value;\n    fedbackState.message = message.value;\n    localStorage.setItem(LS_FEEDBACK_STATE_KEY, JSON.stringify(fedbackState));\n}\n\nfunction updateFeedbackForm() {\n    email.value = fedbackState.email;\n    message.value = fedbackState.message;\n}\n\nfunction getEmptyFeedbackState() {\n    return { email: \"\", message: \"\" };\n}\n"],"names":["LS_FEEDBACK_STATE_KEY","form","email","message","onSubmitFeedback","event","fedbackState","updateFeedbackState","updateFeedbackForm","onInput","throttle","saveFeedbackState","getEmptyFeedbackState","jsonStr"],"mappings":"wIAEA,MAAMA,EAAwB,sBAExBC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAQD,EAAK,SAAS,MACtBE,EAAUF,EAAK,SAAS,QAExBG,EAAmBC,GAAS,CAC9BA,EAAM,eAAc,EACpB,QAAQ,IAAIC,CAAY,EACxB,aAAa,WAAWN,CAAqB,EAC7CO,EAAoB,EAAE,EACtBC,GACJ,EAEMC,EAAUC,EAAS,IAAMC,EAAmB,EAAE,GAAG,EAGvD,IAAIL,EAAeM,EAAqB,EACxCL,EAAoB,aAAa,QAAQP,CAAqB,CAAC,EAC/DQ,IAGAP,EAAK,iBAAiB,SAAUG,CAAgB,EAChDF,EAAM,iBAAiB,QAASO,CAAO,EACvCN,EAAQ,iBAAiB,QAASM,CAAO,EAGzC,SAASF,EAAoBM,EAAS,CAClCP,EAAeO,EAAU,KAAK,MAAMA,CAAO,EAAID,GACnD,CAEA,SAASD,GAAoB,CACzBL,EAAa,MAAQJ,EAAM,MAC3BI,EAAa,QAAUH,EAAQ,MAC/B,aAAa,QAAQH,EAAuB,KAAK,UAAUM,CAAY,CAAC,CAC5E,CAEA,SAASE,GAAqB,CAC1BN,EAAM,MAAQI,EAAa,MAC3BH,EAAQ,MAAQG,EAAa,OACjC,CAEA,SAASM,GAAwB,CAC7B,MAAO,CAAE,MAAO,GAAI,QAAS,EAAE,CACnC"}